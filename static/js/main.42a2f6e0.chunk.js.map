{"version":3,"sources":["assets/img/loader.gif","components/common/Preloader/Preloader.tsx","redux/selectors/authSelectors.ts","api/profile-api.ts","redux/profileReducer.ts","api/users-api.ts","utils/object-helpers.js","redux/findUsersReducer.ts","redux/messagesReducer.ts","api/api.ts","redux/appReducer.ts","redux/navbarReducer.ts","redux/reduxStore.tsx","redux/selectors/appSelectors.ts","components/AppHeader/Header.tsx","App.tsx","index.js","api/security-api.ts","api/auth-api.ts","redux/authReducer.ts"],"names":["Preloader","src","loadingIcon","alt","style","marginLeft","getIsAuth","state","auth","isAuth","getLogin","login","getCaptchaUrl","captchaUrl","profileAPI","userId","instance","get","then","response","data","status","put","photoFile","formData","FormData","append","headers","profile","initialState","postsData","id","message","likeCount","actions","addPost","newPostText","type","deletePost","postId","setUserProfile","setProfileStatus","savePhotoSuccess","photos","getProfileInfo","dispatch","a","getProfileStatus","updateProfileStatus","resultCode","ResultCodes","Succsess","savePhoto","file","saveProfile","getState","stopSubmit","_error","messages","Promise","reject","profileReducer","action","length","filter","post","userAPI","getUsers","currentPage","pageSize","term","friend","follow","unfollow","delete","updateObjectInArray","items","check","objPropName","newObjProps","map","item","users","totalUsersCount","isFetching","followingInProgress","pageNumber","count","isFollowing","payload","requestUsers","page","totalCount","_followUnfollowFlow","apiMethod","actionCreator","bind","findUsersReducer","followed","messagesData","dialogsData","userName","photo","sendMessage","newMessage","messagesReducer","ResultCodeForCaptcha","axios","create","baseURL","withCredentials","initialized","appReducer","friends","name","navbarReducer","reducers","combineReducers","navbar","findUsers","authReducer","form","formReducer","app","store","createStore","applyMiddleware","thunkMiddleware","getAppInitialized","AppHeader","useDispatch","useSelector","Header","span","theme","mode","defaultSelectedKeys","Item","to","backgroundColor","icon","UserOutlined","onClick","logout","Dialogs","React","lazy","ProfileContainer","Login","News","Music","Settings","FindUsers","AppContainer","compose","withRouter","useEffect","getAuth","SubMenu","Menu","Content","Layout","Footer","Sider","padding","margin","className","width","height","title","LaptopOutlined","NotificationOutlined","minHeight","Suspense","fallback","exact","path","render","pageTitle","textAlign","SocialNetworkApp","ReactDOM","StrictMode","document","getElementById","securityAPI","authAPI","email","password","rememberMe","captcha","meData","loginData","CaptchaIsRequired","url"],"mappings":"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","file":"static/js/main.42a2f6e0.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/loader.9c48f460.gif\";","import React from 'react'\r\nimport loadingIcon from '../../../assets/img/loader.gif'\r\n\r\nconst Preloader: React.FC = () => {\r\n    return (\r\n      <div>\r\n        <img src={loadingIcon} alt=\"Loading\" style={{ marginLeft: \"200px\" }} />\r\n      </div>\r\n    );\r\n}\r\n\r\nexport default Preloader;\r\n","import { AppStateType } from '../reduxStore';\r\n\r\nexport const getIsAuth = (state: AppStateType) => {\r\n    return state.auth.isAuth\r\n}\r\n\r\nexport const getLogin = (state: AppStateType) => {\r\n    return state.auth.login\r\n}\r\n\r\nexport const getCaptchaUrl = (state: AppStateType) => {\r\n    return state.auth.captchaUrl\r\n}","import { PhotosType, ProfileType } from './../types/types';\r\nimport { instance, ResponseType } from './api';\r\nimport { AxiosResponse } from 'axios';\r\n\r\ntype UpdateStatusRequestType = {\r\n    status: string\r\n}\r\n\r\ntype SavePhotoResponseType = {\r\n    photos: PhotosType\r\n}\r\n\r\nexport const profileAPI = {\r\n    getProfileInfo(userId: number | null) {\r\n        return instance.get<ProfileType>(`profile/${userId}`)\r\n            .then(response => response.data);\r\n    },\r\n    getStatus(userId: number) {\r\n        return instance.get<string>(`profile/status/${userId}`)\r\n            .then(response => response.data);\r\n    },\r\n    updateStatus(status: string) {\r\n        return instance.put<UpdateStatusRequestType, AxiosResponse<ResponseType>>(`profile/status`, { status: status })\r\n            .then(response => response.data);\r\n    },\r\n    savePhoto(photoFile: File) {\r\n        const formData = new FormData();\r\n        formData.append('image', photoFile);\r\n        return instance.put<typeof formData, AxiosResponse<ResponseType<SavePhotoResponseType>>>(`profile/photo`, formData, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        })\r\n            .then(response => response.data);\r\n    },\r\n    saveProfile(profile: ProfileType) {\r\n        return instance.put<ProfileType, AxiosResponse<ResponseType>>(`profile`, profile)\r\n            .then(response => response.data);\r\n    }\r\n}","import { GetStateType } from './../types/types';\r\nimport { ThunkType, InferActionsTypes } from './reduxStore';\r\nimport { profileAPI } from \"../api/profile-api\";\r\nimport { stopSubmit } from \"redux-form\";\r\nimport { PostType, PhotosType, ProfileType } from \"../types/types\";\r\nimport { ResultCodes } from '../api/api';\r\n\r\nconst initialState = {\r\n  postsData: [\r\n    { id: 1, message: \"Hi? how are you?\", likeCount: 0 },\r\n    { id: 2, message: \"It's my first post!\", likeCount: 23 },\r\n  ] as PostType[],\r\n  profile: null as ProfileType | null,\r\n  status: \"\"\r\n};\r\n\r\nexport const actions = {\r\n  addPost: (newPostText: string) => ({ type: 'profile/ADD_POST', newPostText: newPostText } as const),\r\n\r\n  deletePost: (postId: number) => ({ type: 'profile/DELETE_POST', postId: postId } as const),\r\n\r\n  setUserProfile: (profile: ProfileType) => ({ type: 'profile/SET_USER_PROFILE', profile } as const),\r\n\r\n  setProfileStatus: (status: string) => ({ type: 'profile/SET_PROFILE_STATUS', status } as const),\r\n\r\n  savePhotoSuccess: (photos: PhotosType) => ({ type: 'profile/SAVE_PHOTO_SUCCESS', photos } as const),\r\n}\r\n\r\ntype InitialStateType = typeof initialState;\r\n\r\ntype ActionsTypes = InferActionsTypes<typeof actions>\r\n\r\nconst profileReducer = (state = initialState, action: ActionsTypes): InitialStateType => {\r\n  switch (action.type) {\r\n    case 'profile/ADD_POST': {\r\n      return {\r\n        ...state,\r\n        postsData: [\r\n          ...state.postsData,\r\n          {\r\n            id: state.postsData[state.postsData.length - 1].id + 1,\r\n            message: action.newPostText,\r\n            likeCount: 0,\r\n          },\r\n        ],\r\n      };\r\n    }\r\n    case 'profile/DELETE_POST': {\r\n      return { ...state, postsData: state.postsData.filter(post => post.id !== action.postId)}\r\n      }\r\n    case 'profile/SET_USER_PROFILE': {\r\n      return { ...state, profile: action.profile }\r\n    }\r\n    case 'profile/SET_PROFILE_STATUS': {\r\n      return { ...state, status: action.status }\r\n    }\r\n    case 'profile/SAVE_PHOTO_SUCCESS': {\r\n      return { ...state, profile: { ...state.profile, photos: action.photos} as ProfileType }\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const getProfileInfo = (userId: number | null): ThunkType<ActionsTypes> => async (dispatch) => {\r\n  const data = await profileAPI.getProfileInfo(userId)\r\n  dispatch(actions.setUserProfile(data));\r\n}\r\n\r\nexport const getProfileStatus = (userId: number): ThunkType<ActionsTypes> => async (dispatch) => {\r\n  const data = await profileAPI.getStatus(userId)\r\n  dispatch(actions.setProfileStatus(data));\r\n}\r\n\r\nexport const updateProfileStatus = (status: string): ThunkType<ActionsTypes> => async (dispatch) => {\r\n  const data = await profileAPI.updateStatus(status)\r\n  if (data.resultCode === ResultCodes.Succsess) {\r\n    dispatch(actions.setProfileStatus(status));\r\n  }\r\n}\r\n\r\nexport const savePhoto = (file: File): ThunkType<ActionsTypes> => async (dispatch) => {\r\n  const data = await profileAPI.savePhoto(file);\r\n  if (data.resultCode === ResultCodes.Succsess) {\r\n    dispatch(actions.savePhotoSuccess(data.data.photos));\r\n  }\r\n}\r\n\r\nexport const saveProfile = (profile: ProfileType): ThunkType<ActionsTypes | ReturnType<typeof stopSubmit>> => async (dispatch, getState: GetStateType) => {\r\n  const userId = getState().auth.id;\r\n  const data = await profileAPI.saveProfile(profile);\r\n  if (data.resultCode === ResultCodes.Succsess) {\r\n    dispatch(getProfileInfo(userId));\r\n  } else {\r\n    dispatch(stopSubmit(\"edit-profile\", { _error: data.messages[0] }));\r\n    return Promise.reject(data.messages[0]);\r\n  }\r\n}\r\n\r\nexport default profileReducer;","import { instance, GetItemsType } from './api'\r\nimport { AxiosResponse } from 'axios'\r\n\r\ntype FollowRequestType = {\r\n    userId: number\r\n}\r\n\r\nexport const userAPI = {\r\n    getUsers(currentPage = 1, pageSize = 10, term = '', friend: null | boolean = null) {\r\n        if (friend === null) {\r\n            return instance.get<GetItemsType>(`users?page=${currentPage}&count=${pageSize}&term=${term}`\r\n            ).then(response => response.data)\r\n        }\r\n        return instance.get<GetItemsType>(`users?page=${currentPage}&count=${pageSize}&term=${term}&friend=${friend}`\r\n        ).then(response => response.data)\r\n    },\r\n    follow(id: number) {\r\n        return instance.post<FollowRequestType, AxiosResponse<ResponseType>>(`follow/${id}`)\r\n            .then(response => response.data)\r\n    },\r\n    unfollow(id: number) {\r\n        return instance.delete<FollowRequestType, AxiosResponse<ResponseType>>(`follow/${id}`)\r\n            .then(response => response.data)\r\n    },\r\n}","export const updateObjectInArray = (items, check, objPropName, newObjProps) => {\r\n    return items.map((item) => {\r\n        if (item[objPropName] === check) {\r\n            return { ...item, ...newObjProps };\r\n        }\r\n        return item;\r\n    })\r\n}\r\n","import { ResultCodes } from './../api/api'\r\nimport { InferActionsTypes, ThunkType } from './reduxStore'\r\nimport { UserType } from '../types/types'\r\nimport { userAPI } from '../api/users-api'\r\nimport { updateObjectInArray } from '../utils/object-helpers'\r\nimport { Dispatch } from 'redux'\r\n\r\nconst initialState = {\r\n  users: [] as UserType[],\r\n  pageSize: 10,\r\n  totalUsersCount: 0,\r\n  currentPage: 1,\r\n  isFetching: false,\r\n  followingInProgress: [] as number[],\r\n  filter: {\r\n    term: '',\r\n    friend: null as null | boolean\r\n  }\r\n}\r\n\r\nexport const actions = {\r\n  followSuccess: (userId: number) => ({ type: 'findUsers/FOLLOW_SUCCESS', userId } as const),\r\n\r\n  unfollowSuccess: (userId: number) => ({ type: 'findUsers/UNFOLLOW_SUCCESS', userId } as const),\r\n\r\n  setUsers: (users: UserType[]) => ({ type: 'findUsers/SET_USERS', users } as const),\r\n\r\n  setCurrentPage: (pageNumber: number) => ({\r\n    type: 'findUsers/SET_CURRENT_PAGE',\r\n    pageNumber,\r\n  } as const),\r\n\r\n  setTotalUsersCount: (totalUsersCount: number) => ({\r\n    type: 'findUsers/SET_TOTAL_USERS_COUNT',\r\n    count: totalUsersCount,\r\n  } as const),\r\n\r\n  setIsFetching: (isFetching: boolean) => ({\r\n    type: 'findUsers/SET_IS_FETCHING',\r\n    isFetching: isFetching,\r\n  } as const),\r\n  setFollowingProgress: (isFollowing: boolean, userId: number) => ({\r\n    type: 'findUsers/SET_FOLLOWING_PROGRESS',\r\n    isFollowing: isFollowing,\r\n    userId: userId\r\n  } as const),\r\n  setFilter: (filter: FilterType) => ({\r\n    type: 'findUsers/SET_FILTER',\r\n    payload: filter\r\n  } as const)\r\n}\r\n\r\nexport type InitialStateType = typeof initialState\r\n\r\nexport type FilterType = typeof initialState.filter\r\n\r\ntype ActionsTypes = InferActionsTypes<typeof actions>\r\n\r\nexport const findUsersReducer = (state = initialState, action: ActionsTypes): InitialStateType => {\r\n  switch (action.type) {\r\n    case 'findUsers/FOLLOW_SUCCESS': {\r\n      return {\r\n        ...state,\r\n        users: updateObjectInArray(state.users, action.userId, \"id\", { followed: true })\r\n      };\r\n    }\r\n    case 'findUsers/UNFOLLOW_SUCCESS': {\r\n      return {\r\n        ...state,\r\n        users: updateObjectInArray(state.users, action.userId, \"id\", { followed: false })\r\n      };\r\n    }\r\n    case 'findUsers/SET_USERS': {\r\n      return { ...state, users: action.users }\r\n    }\r\n    case 'findUsers/SET_CURRENT_PAGE': {\r\n      return { ...state, currentPage: action.pageNumber }\r\n    }\r\n    case 'findUsers/SET_TOTAL_USERS_COUNT': {\r\n      return { ...state, totalUsersCount: action.count }\r\n    }\r\n    case 'findUsers/SET_IS_FETCHING': {\r\n      return { ...state, isFetching: action.isFetching }\r\n    }\r\n    case 'findUsers/SET_FOLLOWING_PROGRESS': {\r\n      return {\r\n        ...state,\r\n        followingInProgress: action.isFollowing\r\n          ? [...state.followingInProgress, action.userId]\r\n          : state.followingInProgress.filter(id => id !== action.userId)\r\n      };\r\n    }\r\n    case 'findUsers/SET_FILTER': {\r\n      return {\r\n        ...state,\r\n        filter: action.payload\r\n      }\r\n    }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const requestUsers = (page: number, pageSize: number, filter: FilterType): ThunkType<ActionsTypes> => async (dispatch) => {\r\n  dispatch(actions.setIsFetching(true))\r\n  dispatch(actions.setCurrentPage(page))\r\n  dispatch(actions.setFilter(filter))\r\n  const data = await userAPI.getUsers(page, pageSize, filter.term, filter.friend)\r\n  dispatch(actions.setIsFetching(false))\r\n  dispatch(actions.setUsers(data.items))\r\n  dispatch(actions.setTotalUsersCount(data.totalCount))\r\n}\r\n\r\nconst _followUnfollowFlow = async (dispatch: Dispatch<ActionsTypes>, apiMethod: any, userId: number, actionCreator: (userId: number) => ActionsTypes) => {\r\n  dispatch(actions.setFollowingProgress(true, userId))\r\n  const data = await apiMethod(userId)\r\n  if (data.resultCode === ResultCodes.Succsess) {\r\n    dispatch(actionCreator(userId))\r\n  }\r\n  dispatch(actions.setFollowingProgress(false, userId))\r\n}\r\n\r\nexport const follow = (userId: number): ThunkType<ActionsTypes> => async (dispatch) => {\r\n  await _followUnfollowFlow(dispatch, userAPI.follow.bind(userAPI), userId, actions.followSuccess)\r\n}\r\n\r\nexport const unfollow = (userId: number): ThunkType<ActionsTypes> => async (dispatch) => {\r\n  await _followUnfollowFlow(dispatch, userAPI.unfollow.bind(userAPI), userId, actions.unfollowSuccess)\r\n}\r\n\r\nexport default findUsersReducer\r\n","import { InferActionsTypes } from './reduxStore';\r\nimport { MessageType, DialogType } from \"../types/types\";\r\n\r\nconst initialState = {\r\n  messagesData: [\r\n    { id: 1, message: \"Hi\" },\r\n    { id: 2, message: \"How are you?\" },\r\n    { id: 3, message: \"Yo\" },\r\n  ] as MessageType[],\r\n  dialogsData: [\r\n    {\r\n      id: 1,\r\n      userName: \"Dimych\",\r\n      photo:\r\n        \"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg\",\r\n    },\r\n    {\r\n      id: 2,\r\n      userName: \"Max\",\r\n      photo:\r\n        \"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg\",\r\n    },\r\n    {\r\n      id: 3,\r\n      userName: \"Anna\",\r\n      photo:\r\n        \"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg\",\r\n    },\r\n    {\r\n      id: 4,\r\n      userName: \"Sveta\",\r\n      photo:\r\n        \"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg\",\r\n    },\r\n    {\r\n      id: 5,\r\n      userName: \"Sasha\",\r\n      photo:\r\n        \"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg\",\r\n    },\r\n    {\r\n      id: 6,\r\n      userName: \"Victor\",\r\n      photo:\r\n        \"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg\",\r\n    },\r\n  ] as DialogType[],\r\n};\r\n\r\nexport const actions = {\r\n  sendMessage: (newMessage: string) => ({ type: 'messages/SEND-MESSAGE', newMessage: newMessage } as const)\r\n}\r\n\r\ntype InitialStateType = typeof initialState;\r\n\r\ntype ActionsTypes = InferActionsTypes<typeof actions>\r\n\r\nconst messagesReducer = (state = initialState, action: ActionsTypes): InitialStateType => {\r\n  switch (action.type) {\r\n    case 'messages/SEND-MESSAGE': {\r\n      return {\r\n        ...state,\r\n        messagesData: [\r\n          ...state.messagesData,\r\n          {\r\n            id: state.messagesData[state.messagesData.length - 1].id + 1,\r\n            message: action.newMessage,\r\n          },\r\n        ],\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default messagesReducer;\r\n\r\n","import { UserType } from './../types/types';\r\nimport axios from 'axios';\r\n\r\nexport const instance = axios.create({\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n    withCredentials: true,\r\n    headers: {\r\n        'API-KEY': 'f406f314-0e27-4ae0-9815-6188b0f3b0b0'\r\n    }\r\n})\r\n\r\nexport enum ResultCodes {\r\n    Succsess = 0,\r\n    Error = 1,\r\n}\r\n\r\nexport enum ResultCodeForCaptcha {\r\n    CaptchaIsRequired = 10\r\n}\r\n\r\nexport type GetItemsType = {\r\n    items: UserType[],\r\n    totalCount: number,\r\n    error: string | null\r\n}\r\n\r\nexport type ResponseType<D ={}, RC=ResultCodes> = {\r\n    data: D,\r\n    resultCode: RC,\r\n    messages: string[],\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { InferActionsTypes } from './reduxStore';\r\nimport { getAuth } from './authReducer';\r\n\r\nconst initialState = {\r\n    initialized: false,\r\n};\r\n\r\nconst actions = {\r\n    initializingSuccess: () => ({ type: 'app/INITIALIZED_SUCCESS' } as const)\r\n}\r\n\r\ntype InitialStateType = typeof initialState;\r\n\r\ntype ActionsTypes =  InferActionsTypes<typeof actions>\r\n\r\nconst appReducer = (state = initialState, action: ActionsTypes):InitialStateType => {\r\n    switch (action.type) {\r\n        case 'app/INITIALIZED_SUCCESS': {\r\n            return { ...state, initialized: true }\r\n        }\r\n        default: return state\r\n    }\r\n}\r\n\r\nexport const initializeApp = () => (dispatch: any) => {\r\n    dispatch(getAuth()).then(() => dispatch(actions.initializingSuccess()));\r\n}\r\n\r\nexport default appReducer;","import { FriendType } from './../types/types';\r\nconst initialState = {\r\n  friends: [\r\n    {\r\n      id: 1,\r\n      name: \"Dimych\",\r\n      photo:\r\n        \"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg\",\r\n    },\r\n    {\r\n      id: 2,\r\n      name: \"Max\",\r\n      photo:\r\n        \"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg\",\r\n    },\r\n    {\r\n      id: 3,\r\n      name: \"Sveta\",\r\n      photo:\r\n        \"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg\",\r\n    },\r\n  ] as FriendType[],\r\n};\r\n\r\ntype InitialStateType = typeof initialState;\r\n\r\nconst navbarReducer = (state = initialState): InitialStateType => {\r\n  return state;\r\n};\r\n\r\nexport default navbarReducer;\r\n","import { Action, applyMiddleware, combineReducers, createStore } from 'redux'\r\nimport profileReducer from \"./profileReducer\";\r\nimport messagesReducer from \"./messagesReducer\";\r\nimport navbarReducer from \"./navbarReducer\";\r\nimport findUsersReducer from \"./findUsersReducer\";\r\nimport authReducer from './authReducer';\r\nimport appReducer from './appReducer'\r\nimport thunkMiddleware, { ThunkAction } from 'redux-thunk'\r\nimport { reducer as formReducer } from 'redux-form'\r\n\r\nconst reducers = combineReducers({\r\n  profile: profileReducer,\r\n  messages: messagesReducer,\r\n  navbar: navbarReducer,\r\n  findUsers: findUsersReducer,\r\n  auth: authReducer,\r\n  form: formReducer,\r\n  app: appReducer,\r\n});\r\n\r\ntype RootReducerType = typeof reducers;\r\nexport type AppStateType = ReturnType<RootReducerType>;\r\n\r\nexport type InferActionsTypes<T> = T extends {[keys: string] : (...args: any[]) => infer U} ? U : never\r\n\r\nexport type ThunkType<A extends Action, R=Promise<void>> = ThunkAction<R, AppStateType, unknown, A>\r\n\r\nconst store = createStore(reducers, applyMiddleware(thunkMiddleware));\r\n\r\nexport default store;","import { AppStateType } from '../reduxStore'\r\n\r\nexport const getAppInitialized = (state: AppStateType) => {\r\n    return state.app.initialized\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n// Styles\r\nimport { Menu, Row, Col, Layout, Button } from 'antd'\r\nimport { UserOutlined } from '@ant-design/icons'\r\nimport Avatar from 'antd/lib/avatar/avatar'\r\n// Redux\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { logout } from '../../redux/authReducer'\r\nimport { getIsAuth, getLogin } from '../../redux/selectors/authSelectors'\r\n\r\nconst AppHeader: React.FC = () => {\r\n  const dispatch = useDispatch()\r\n  const login = useSelector(getLogin)\r\n  const isAuth = useSelector(getIsAuth)\r\n  return (\r\n    <Layout.Header>\r\n      <Row>\r\n        <Col span={18}>\r\n          <Menu theme=\"dark\" mode=\"horizontal\" defaultSelectedKeys={['2']}>\r\n            <Menu.Item key=\"1\">\r\n              <Link to=\"/developers\">Developers</Link>\r\n            </Menu.Item>\r\n          </Menu>\r\n        </Col>\r\n        {isAuth\r\n          ? <>\r\n            <Col span={1}>\r\n              <Avatar alt={login || ''} style={{ backgroundColor: '#87d068' }} icon={<UserOutlined />}></Avatar>\r\n            </Col>\r\n            <Col span={5}>\r\n              <Button onClick={dispatch(logout)}>LogOut</Button>\r\n            </Col>\r\n          </>\r\n          : <Col span={6} >\r\n            <Button>\r\n              <Link to=\"./login\">Login</Link>\r\n            </Button>\r\n          </Col>\r\n        }\r\n      </Row>\r\n    </Layout.Header>\r\n  )\r\n}\r\n\r\nexport default AppHeader;","import React, { useEffect } from 'react'\r\nimport { BrowserRouter, Route, withRouter, Redirect, Switch, Link } from 'react-router-dom'\r\n// Redux\r\nimport { Provider, useDispatch, useSelector } from 'react-redux';\r\nimport { initializeApp } from './redux/appReducer'\r\nimport { compose } from 'redux';\r\nimport store from './redux/reduxStore'\r\nimport { getAppInitialized } from './redux/selectors/appSelectors'\r\n//Styles\r\nimport './App.css'\r\nimport 'antd/dist/antd.css'\r\nimport { Layout, Menu, Breadcrumb } from 'antd'\r\nimport { UserOutlined, LaptopOutlined, NotificationOutlined } from '@ant-design/icons'\r\n// Components\r\nimport Navbar from './components/Navbar/Navbar'\r\nimport Preloader from './components/common/Preloader/Preloader'\r\nimport AppHeader from './components/AppHeader/Header';\r\nconst Dialogs = React.lazy(() => import('./components/Dialogs/Dialogs'))\r\nconst ProfileContainer = React.lazy(() => import('./components/Profile/ProfileContainer'))\r\nconst Login = React.lazy(() => import('./components/Login/Login'))\r\nconst News = React.lazy(() => import('./components/News/News'))\r\nconst Music = React.lazy(() => import('./components/Music/Music'))\r\nconst Settings = React.lazy(() => import('./components/Settings/Settings'))\r\nconst FindUsers = React.lazy(() => import('./components/FindUsers/FindUsers'))\r\n\r\nconst App: React.FC = () => {\r\n  const dispatch = useDispatch()\r\n  useEffect(() => {\r\n    dispatch(initializeApp())\r\n  }, [])\r\n\r\n  const initialized = useSelector(getAppInitialized)\r\n\r\n  if (!initialized) {\r\n    return <Preloader />\r\n  }\r\n\r\n  const { SubMenu } = Menu\r\n  const { Content, Footer, Sider } = Layout\r\n\r\n  return (\r\n    <Layout>\r\n      <AppHeader />\r\n      <Content style={{ padding: '0 50px' }}>\r\n        <Breadcrumb style={{ margin: '16px 0' }}>\r\n          <Breadcrumb.Item>Home</Breadcrumb.Item>\r\n          <Breadcrumb.Item>List</Breadcrumb.Item>\r\n          <Breadcrumb.Item>App</Breadcrumb.Item>\r\n        </Breadcrumb>\r\n        <Layout className=\"site-layout-background\" style={{ padding: '24px 0' }}>\r\n          <Sider className=\"site-layout-background\" width={200}>\r\n            <Menu\r\n              mode=\"inline\"\r\n              defaultSelectedKeys={['1']}\r\n              style={{ height: '100%' }}\r\n            >\r\n              <SubMenu key=\"sub1\" icon={<UserOutlined />} title=\"My Profile\">\r\n                <Menu.Item key=\"1\">\r\n                  <Link to=\"/profile\">\r\n                    PROFILE\r\n                  </Link>\r\n                </Menu.Item>\r\n                <Menu.Item key=\"2\">\r\n                  <Link to=\"/dialogs\">\r\n                    MESSAGES\r\n                  </Link>\r\n                </Menu.Item>\r\n              </SubMenu>\r\n              <SubMenu key=\"sub2\" icon={<LaptopOutlined />} title=\"Developers\">\r\n                <Menu.Item key=\"5\">\r\n                  <Link to=\"/developers\">\r\n                    Developers\r\n                  </Link>\r\n                </Menu.Item>\r\n                <Menu.Item key=\"6\">option6</Menu.Item>\r\n                <Menu.Item key=\"7\">option7</Menu.Item>\r\n                <Menu.Item key=\"8\">option8</Menu.Item>\r\n              </SubMenu>\r\n              <SubMenu key=\"sub3\" icon={<NotificationOutlined />} title=\"subnav 3\">\r\n                <Menu.Item key=\"9\">option9</Menu.Item>\r\n                <Menu.Item key=\"10\">option10</Menu.Item>\r\n                <Menu.Item key=\"11\">option11</Menu.Item>\r\n                <Menu.Item key=\"12\">option12</Menu.Item>\r\n              </SubMenu>\r\n            </Menu>\r\n          </Sider>\r\n          <Content style={{ padding: '0 24px', minHeight: 280 }}>\r\n            <React.Suspense fallback={Preloader}>\r\n              <Switch>\r\n                <Route\r\n                  exact path=\"/react-social-network\"\r\n                  render={() => <Redirect to=\"/profile\" />}\r\n                />\r\n                <Route\r\n                  path=\"/profile/:userId?\"\r\n                  render={() => <ProfileContainer />}\r\n                />\r\n                <Route\r\n                  path=\"/dialogs\"\r\n                  render={() => <Dialogs />}\r\n                />\r\n                <Route path=\"/news\" render={() => <News />} />\r\n                <Route path=\"/music\" render={() => <Music />} />\r\n                <Route path=\"/developers\" render={() => <FindUsers pageTitle=\"React Social Network Users\" />} />\r\n                <Route path=\"/settings\" render={() => <Settings />} />\r\n                <Route path=\"/login\" render={() => <Login />} />\r\n              </Switch>\r\n            </React.Suspense>\r\n          </Content>\r\n        </Layout>\r\n      </Content>\r\n      <Footer style={{ textAlign: 'center' }}>React Social Network</Footer>\r\n    </Layout>\r\n    // <div className=\"app-wrapper\">\r\n    //   <Header />\r\n    //   <Navbar />\r\n    //   <div className=\"app-wrapper-content\">\r\n    //     <React.Suspense fallback={Preloader}>\r\n    //       <Switch>\r\n    //         <Route\r\n    //           exact path=\"/\"\r\n    //           render={() => <Redirect to=\"/profile\" />}\r\n    //         />\r\n    //         <Route\r\n    //           path=\"/profile/:userId?\"\r\n    //           render={() => <ProfileContainer />}\r\n    //         />\r\n    //         <Route\r\n    //           path=\"/dialogs\"\r\n    //           render={() => <Dialogs />}\r\n    //         />\r\n    //         <Route path=\"/news\" render={() => <News />} />\r\n    //         <Route path=\"/music\" render={() => <Music />} />\r\n    //         <Route path=\"/users\" render={() => <FindUsers pageTitle=\"React Social Network Users\" />} />\r\n    //         <Route path=\"/settings\" render={() => <Settings />} />\r\n    //         <Route path=\"/login\" render={() => <Login />} />\r\n    //       </Switch>\r\n    //     </React.Suspense>\r\n    //   </div>\r\n    // </div>\r\n  )\r\n}\r\n\r\nconst AppContainer = compose<React.ComponentType>(withRouter)(App);\r\n\r\nconst SocialNetworkApp: React.FC = () => {\r\n  return (\r\n    <BrowserRouter>\r\n      <Provider store={store}>\r\n        <AppContainer />\r\n      </Provider>\r\n    </BrowserRouter>\r\n  )\r\n}\r\n\r\nexport default SocialNetworkApp\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport SocialNetworkApp from \"./App\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n     <SocialNetworkApp />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n\r\n","import { instance } from './api';\r\n\r\ntype GetCaptchaUrlResponseType = {\r\n    url: string\r\n}\r\n\r\nexport const securityAPI = {\r\n    getCaptchaUrl() {\r\n        return instance.get<GetCaptchaUrlResponseType>(`security/get-captcha-url`)\r\n            .then(response => response.data);\r\n    }\r\n}","import { ResultCodes, ResultCodeForCaptcha, instance, ResponseType } from './api';\r\nimport { AxiosResponse } from 'axios';\r\n\r\ntype MeResponseDataType = {\r\n    id: number,\r\n    email: string,\r\n    login: string\r\n}\r\n\r\ntype loginLogoutDataType = {\r\n    userId: number\r\n}\r\n\r\ntype LoginRequestType = {\r\n    email: string,\r\n    password: string,\r\n    rememberMe: boolean,\r\n    captcha: null | string\r\n}\r\n\r\nexport const authAPI = {\r\n    me() {\r\n        return instance.get<ResponseType<MeResponseDataType>>(`auth/me`)\r\n            .then(response => response.data);\r\n    },\r\n    login(email: string, password: string, rememberMe = false, captcha: null | string = null) {\r\n        return instance.post<LoginRequestType,\r\n            AxiosResponse<ResponseType<loginLogoutDataType, ResultCodes | ResultCodeForCaptcha>>>\r\n            (`auth/login`, { email: email, password: password, rememberMe: rememberMe, captcha: captcha })\r\n            .then(response => response.data);\r\n    },\r\n    logout() {\r\n        return instance.delete<ResponseType<loginLogoutDataType>>(`auth/login`)\r\n            .then(response => response.data);\r\n    }\r\n}","import { ResultCodes, ResultCodeForCaptcha } from './../api/api';\r\nimport { InferActionsTypes, ThunkType } from './reduxStore';\r\nimport { stopSubmit } from \"redux-form\";\r\nimport { securityAPI } from \"../api/security-api\";\r\nimport { authAPI } from '../api/auth-api';\r\n\r\nconst initialState = {\r\n    id: null as number | null,\r\n    email: null as string | null,\r\n    login: null as string | null,\r\n    isAuth: false,\r\n    captchaUrl: null as string | null\r\n}\r\n\r\nexport const actions = {\r\n    setAuthUserData: (userId: number | null, email: string | null, login: string | null, isAuth: boolean) => ({\r\n        type: 'auth/SET_AUTH_USER_DATA',\r\n        payload: {\r\n            id: userId, email: email, login: login, isAuth: isAuth\r\n        }\r\n    } as const),\r\n    getCaptchaUrlSuccess: (captchaUrl: string) => ({\r\n        type: 'auth/GET_CAPTCHA_URL_SUCCESS',\r\n        payload: {\r\n            captchaUrl: captchaUrl\r\n        }\r\n    } as const),\r\n}\r\n\r\ntype InitialStateType = typeof initialState;\r\n\r\ntype ActionsTypes = InferActionsTypes<typeof actions>\r\n\r\nconst authReducer = (state = initialState, action: ActionsTypes): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'auth/SET_AUTH_USER_DATA': {\r\n            return { ...state, ...action.payload }\r\n        }\r\n        case 'auth/GET_CAPTCHA_URL_SUCCESS': {\r\n            return { ...state, ...action.payload }\r\n        } \r\n        default: return state\r\n    }\r\n}\r\n\r\nexport const getAuth = (): ThunkType<ActionsTypes> => async (dispatch) => {\r\n    const meData = await authAPI.me()\r\n    if (meData.resultCode === ResultCodes.Succsess) {\r\n        const { id, email, login } = meData.data\r\n        dispatch(actions.setAuthUserData(id, email, login, true));\r\n    }\r\n}\r\n\r\nexport const login = (email: string, password: string, rememberMe: boolean, captcha: null | string): ThunkType<ActionsTypes | ReturnType<typeof stopSubmit>> => async (dispatch) => {\r\n    const loginData = await authAPI.login(email, password, rememberMe, captcha)\r\n    if (loginData.resultCode === ResultCodes.Succsess) {\r\n        dispatch(getAuth());\r\n    } else {\r\n        if (loginData.resultCode === ResultCodeForCaptcha.CaptchaIsRequired) {\r\n            dispatch(getCaptchaUrl());\r\n        }\r\n        const message = loginData.messages.length > 0 ? loginData.messages[0] : \"Some error\";\r\n        dispatch(stopSubmit(\"login\", { _error: message }));\r\n    }\r\n}\r\n\r\nexport const getCaptchaUrl = (): ThunkType<ActionsTypes> => async (dispatch) => {\r\n    const data = await securityAPI.getCaptchaUrl()\r\n    dispatch(actions.getCaptchaUrlSuccess(data.url));\r\n}\r\n\r\nexport const logout = (): ThunkType<ActionsTypes> => async (dispatch) => {\r\n    const logoutData = await authAPI.logout()\r\n    if (logoutData.resultCode === ResultCodes.Succsess) {\r\n        dispatch(actions.setAuthUserData(null, null, null, false));\r\n    }\r\n}\r\n\r\nexport default authReducer;\r\n\r\n"],"sourceRoot":""}