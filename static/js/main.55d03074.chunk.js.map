{"version":3,"sources":["components/Navbar/Navbar.module.css","components/Header/Header.module.css","redux/appReducer.ts","redux/navbarReducer.ts","redux/reduxStore.tsx","components/Navbar/Friends/Friends.tsx","components/Navbar/Friends/FriendsContainer.tsx","components/Navbar/search_white.svg","components/Navbar/Navbar.tsx","components/Header/logo.svg","components/Header/Header.tsx","components/Header/HeaderContainer.tsx","App.js","index.js","redux/authReducer.ts","components/Navbar/Friends/Friends.module.css","assets/img/loader.gif","components/common/Preloader/Preloader.tsx","redux/profileReducer.ts","api/api.ts","redux/messagesReducer.ts","utils/object-helpers.js","redux/findUsersReducer.ts"],"names":["module","exports","INITIALIZED_SUCCESS","initialState","initialized","appReducer","state","action","type","friends","id","name","photo","navbarReducer","reducers","combineReducers","profile","profileReducer","messages","messagesReducer","navbar","findUsers","findUsersReducer","auth","authReducer","form","formReducer","app","store","createStore","applyMiddleware","thunkMiddleware","Friends","props","className","st","title","map","item","friend","img","src","alt","text","FriendsContainer","connect","Navbar","nav","to","activeClassName","active","icon","search","Header","isAuth","login","logout","header","logo","loginBlock","wrapper","btn","onClick","HeaderContainer","this","Component","DialogsContainer","React","lazy","ProfileContainer","Login","News","Music","Settings","FindUsersContainer","App","catchAllUnhandledErrors","reason","promise","initializeApp","window","addEventListener","removeEventListener","Suspense","fallback","Preloader","exact","path","render","pageTitle","AppContainer","compose","withRouter","dispatch","getAuth","then","SocialNetworkApp","ReactDOM","StrictMode","document","getElementById","SET_AUTH_USER_DATA","GET_CAPTCHA_URL_SUCCESS","email","captchaUrl","setAuthUserData","userId","payload","a","authAPI","me","meData","resultCode","ResultCodes","Succsess","data","password","rememberMe","captcha","loginData","ResultCodeForCaptcha","CaptchaIsRequired","getCaptchaUrl","message","length","stopSubmit","_error","securityAPI","url","loadingIcon","style","marginLeft","ADD_POST","DELETE_POST","SET_USER_PROFILE","SET_PROFILE_STATUS","SAVE_PHOTO_SUCCESS","postsData","likeCount","status","addPost","newPostText","setProfileStatus","getProfileInfo","profileAPI","getProfileStatus","getStatus","updateProfileStatus","updateStatus","savePhoto","file","photos","saveProfile","getState","Promise","reject","filter","post","postId","instance","axios","create","baseURL","withCredentials","headers","userAPI","getUsers","currentPage","pageSize","get","response","follow","unfollow","delete","put","photoFile","formData","FormData","append","SEND_MESSAGE","messagesData","dialogsData","userName","newMessage","sendMessage","updateObjectInArray","items","check","objPropName","newObjProps","FOLLOW_SUCCESS","UNFOLLOW_SUCCESS","SET_USERS","SET_CURRENT_PAGE","SET_TOTAL_USERS_COUNT","SET_IS_FETCHING","SET_FOLLOWING_PROGRESS","users","totalUsersCount","isFetching","followingInProgress","followSuccess","unfollowSuccess","setCurrentPage","pageNumber","setIsFetching","setFollowingProgress","isFollowing","requestUsers","page","totalCount","count","_followUnfollowFlow","apiMethod","actionCreator","bind","followed"],"mappings":"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","file":"static/js/main.55d03074.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__iAsk2\",\"item\":\"Navbar_item__26SM4\",\"active\":\"Navbar_active__2enci\",\"icon\":\"Navbar_icon__Qc7ak\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__Jm1RZ\",\"logo\":\"Header_logo__3vvBu\",\"loginBlock\":\"Header_loginBlock__29PXN\",\"login\":\"Header_login__1HUgF\",\"wrapper\":\"Header_wrapper__u1Ixr\",\"btn\":\"Header_btn__2eD-s\"};","import { getAuth } from \"./authReducer\";\r\n\r\nconst INITIALIZED_SUCCESS = \"app/INITIALIZED_SUCCESS\";\r\n\r\nconst initialState = {\r\n    initialized: false,\r\n};\r\n\r\ntype InitialStateType = typeof initialState;\r\n\r\nconst appReducer = (state = initialState, action: InitializingSuccessActionType):InitialStateType => {\r\n    switch (action.type) {\r\n        case INITIALIZED_SUCCESS: {\r\n            return { ...state, initialized: true }\r\n        }\r\n        default: return state\r\n    }\r\n}\r\n\r\ntype InitializingSuccessActionType = {\r\n    type: typeof INITIALIZED_SUCCESS\r\n}\r\n\r\nexport const initializingSuccess = (): InitializingSuccessActionType => ({ type: INITIALIZED_SUCCESS });\r\n\r\nexport const initializeApp = () => (dispatch: any) => {\r\n    dispatch(getAuth()).then(() => dispatch(initializingSuccess()));\r\n}\r\n\r\nexport default appReducer;","import { FriendType } from './../types/types';\r\nconst initialState = {\r\n  friends: [\r\n    {\r\n      id: 1,\r\n      name: \"Dimych\",\r\n      photo:\r\n        \"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg\",\r\n    },\r\n    {\r\n      id: 2,\r\n      name: \"Max\",\r\n      photo:\r\n        \"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg\",\r\n    },\r\n    {\r\n      id: 3,\r\n      name: \"Sveta\",\r\n      photo:\r\n        \"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg\",\r\n    },\r\n  ] as FriendType[],\r\n};\r\n\r\ntype InitialStateType = typeof initialState;\r\n\r\nconst navbarReducer = (state = initialState): InitialStateType => {\r\n  return state;\r\n};\r\n\r\nexport default navbarReducer;\r\n","import { applyMiddleware, combineReducers, createStore } from 'redux'\r\nimport profileReducer from \"./profileReducer\";\r\nimport messagesReducer from \"./messagesReducer\";\r\nimport navbarReducer from \"./navbarReducer\";\r\nimport findUsersReducer from \"./findUsersReducer\";\r\nimport authReducer from './authReducer';\r\nimport appReducer from './appReducer'\r\nimport thunkMiddleware from 'redux-thunk'\r\nimport {reducer as formReducer} from 'redux-form'\r\n\r\nconst reducers = combineReducers({\r\n  profile: profileReducer,\r\n  messages: messagesReducer,\r\n  navbar: navbarReducer,\r\n  findUsers: findUsersReducer,\r\n  auth: authReducer,\r\n  form: formReducer,\r\n  app: appReducer,\r\n});\r\n\r\ntype RootReducerType = typeof reducers;\r\nexport type AppStateType = ReturnType<RootReducerType>;\r\n\r\nconst store = createStore(reducers, applyMiddleware(thunkMiddleware));\r\n\r\nexport default store;","import React from \"react\";\r\nimport { FriendType } from \"../../../types/types\";\r\nimport st from \"./Friends.module.css\";\r\n\r\ntype PropsType = {\r\n  friends: FriendType[]\r\n}\r\n\r\nconst Friends: React.FC<PropsType> = (props) => {\r\n  return (\r\n    <div>\r\n      <h3 className={st.title}>FRIENDS</h3>\r\n      {props.friends.map((item) => (\r\n        <div key={item.id} className={st.friends}>\r\n          <div className={st.friend}>\r\n            <img className={st.img} src={item.photo} alt=\"Avatar example\"></img>\r\n            <p className={st.text}>{item.name}</p>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Friends\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { AppStateType } from \"../../../redux/reduxStore\";\r\nimport { FriendType } from \"../../../types/types\";\r\nimport Friends from \"./Friends\";\r\n\r\ntype MapStatePropsType = {\r\n  friends: FriendType[] \r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType): MapStatePropsType => {\r\n  return {\r\n    friends: state.navbar.friends\r\n  };\r\n}\r\n\r\nconst FriendsContainer = connect(mapStateToProps)(Friends);\r\n\r\nexport default FriendsContainer;","export default __webpack_public_path__ + \"static/media/search_white.66ea5ec3.svg\";","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport FriendsContainer from \"./Friends/FriendsContainer\";\r\nimport st from \"./Navbar.module.css\";\r\nimport search from \"./search_white.svg\";\r\n\r\nconst Navbar: React.FC = () => {\r\n  return (\r\n    <nav className={st.nav}>\r\n      <NavLink to=\"/profile\" activeClassName={st.active} className={st.item}>\r\n        PROFILE\r\n      </NavLink>\r\n      <NavLink to=\"/dialogs\" activeClassName={st.active} className={st.item}>\r\n        MESSAGES\r\n      </NavLink>\r\n      <NavLink to=\"/news\" activeClassName={st.active} className={st.item}>\r\n        NEWS\r\n      </NavLink>\r\n      <NavLink to=\"/music\" activeClassName={st.active} className={st.item}>\r\n        MUSIC\r\n      </NavLink>\r\n      <NavLink to=\"/users\" activeClassName={st.active} className={st.item}>\r\n        <div className={st.icon}>\r\n          <img src={search} alt=\"serach icon\"/>\r\n          USERS\r\n        </div>\r\n      </NavLink>\r\n      <br />\r\n      <NavLink to=\"/settings\" activeClassName={st.active} className={st.item}>\r\n        SETTINGS\r\n      </NavLink>\r\n      <FriendsContainer />\r\n    </nav>\r\n  );\r\n}\r\n\r\nexport default Navbar\r\n","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import React from 'react'\r\nimport logo from \"./logo.svg\";\r\nimport st from \"./Header.module.css\";\r\nimport { NavLink } from 'react-router-dom';\r\n\r\ntype PropsType = {\r\n  isAuth: boolean,\r\n  login: string | null,\r\n  logout: () => void\r\n}\r\n\r\nconst Header: React.FC<PropsType> = ({isAuth, login, logout}) => {\r\n  return (\r\n    <header className={st.header}>\r\n      <img className={st.logo} src={logo} alt=\"logo\"></img>\r\n      <div className={st.loginBlock}>\r\n        {isAuth\r\n          ? <div className={st.wrapper}>\r\n            <p className={st.login}>{login}</p>\r\n            <button className={st.btn} onClick={logout}>LogOut</button>\r\n          </div>\r\n          : <NavLink className={st.login} to=\"./login\">Login</NavLink>\r\n        }\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;","import React, { Component } from 'react'\r\nimport Header from './Header';\r\nimport { connect } from 'react-redux';\r\nimport { logout } from '../../redux/authReducer'\r\nimport { AppStateType } from '../../redux/reduxStore';\r\n\r\ntype MapStatePropsType = {\r\n    isAuth: boolean,\r\n    login: string | null\r\n}\r\n\r\ntype MapDispatchPropsType = {\r\n    logout: () => void\r\n}\r\n\r\ntype PropsType = MapStatePropsType & MapDispatchPropsType\r\n\r\nclass HeaderContainer extends Component<PropsType> {\r\n    constructor(props: PropsType) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        return (\r\n            <Header {...this.props} />\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType): MapStatePropsType => {\r\n    return {\r\n        isAuth: state.auth.isAuth,\r\n        login: state.auth.login\r\n    };\r\n};\r\n\r\nexport default connect<MapStatePropsType, MapDispatchPropsType, null, AppStateType>(mapStateToProps, { logout })(HeaderContainer);\r\n\r\n\r\n","import React, { Component } from 'react'\r\nimport { BrowserRouter, Route, withRouter, Redirect, Switch } from \"react-router-dom\";\r\n\r\n// Redux\r\nimport { connect, Provider } from \"react-redux\";\r\nimport { initializeApp } from \"./redux/appReducer\"\r\nimport { compose } from \"redux\";\r\nimport store from \"./redux/reduxStore\";\r\n\r\n//Styles\r\nimport \"./App.css\";\r\n\r\n// Components\r\nimport Navbar from \"./components/Navbar/Navbar\";\r\nimport HeaderContainer from \"./components/Header/HeaderContainer\";\r\nimport Preloader from \"./components/common/Preloader/Preloader\";\r\nconst DialogsContainer = React.lazy(() => import('./components/Dialogs/DialogsContainer'));\r\nconst ProfileContainer = React.lazy(() => import('./components/Profile/ProfileContainer'));\r\nconst Login = React.lazy(() => import('./components/Login/Login'));\r\nconst News = React.lazy(() => import('./components/News/News'));\r\nconst Music = React.lazy(() => import('./components/Music/Music'));\r\nconst Settings = React.lazy(() => import('./components/Settings/Settings'));\r\nconst FindUsersContainer = React.lazy(() => import('./components/FindUsers/FindUsersContainer'));\r\n\r\nclass App extends Component {\r\n  catchAllUnhandledErrors = (reason, promise) => {\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.initializeApp();\r\n    window.addEventListener('unhandledrejection', this.catchAllUnhandledErrors);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('unhandledrejection', this.catchAllUnhandledErrors);\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.initialized) {\r\n      return <Preloader />\r\n    }\r\n    return (\r\n      <div className=\"app-wrapper\">\r\n        <HeaderContainer />\r\n        <Navbar />\r\n        <div className=\"app-wrapper-content\">\r\n          <React.Suspense fallback={Preloader}>\r\n            <Switch>\r\n              <Route\r\n                exact path=\"/\"\r\n                render={() => <Redirect to=\"/profile\" />}\r\n              />\r\n              <Route\r\n                path=\"/profile/:userId?\"\r\n                render={() => <ProfileContainer />}\r\n              />\r\n              <Route\r\n                path=\"/dialogs\"\r\n                render={() => <DialogsContainer />}\r\n              />\r\n              <Route path=\"/news\" render={() => <News />} />\r\n              <Route path=\"/music\" render={() => <Music />} />\r\n              <Route path=\"/users\" render={() => <FindUsersContainer pageTitle=\"React Social Network Users\"/>} />\r\n              <Route path=\"/settings\" render={() => <Settings />} />\r\n              <Route path=\"/login\" render={() => <Login />} />\r\n            </Switch>\r\n          </React.Suspense>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    initialized: state.app.initialized,\r\n  }\r\n}\r\n\r\nconst AppContainer = compose(withRouter, connect(mapStateToProps, { initializeApp }))(App);\r\n\r\nconst SocialNetworkApp = () => {\r\n  return (\r\n    <BrowserRouter>\r\n      <Provider store={store}>\r\n        <AppContainer />\r\n      </Provider>\r\n    </BrowserRouter>\r\n  )\r\n}\r\n\r\nexport default SocialNetworkApp;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport SocialNetworkApp from \"./App\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n     <SocialNetworkApp />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n\r\n","import { ResultCodes, ResultCodeForCaptcha } from './../api/api';\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { AppStateType } from './reduxStore';\r\nimport { stopSubmit } from \"redux-form\";\r\nimport { authAPI, securityAPI } from \"../api/api\";\r\n\r\nconst SET_AUTH_USER_DATA = \"auth/SET_AUTH_USER_DATA\";\r\nconst GET_CAPTCHA_URL_SUCCESS = \"auth/GET_CAPTCHA_URL_SUCCESS\";\r\n\r\nconst initialState = {\r\n    id: null as number | null,\r\n    email: null as string | null,\r\n    login: null as string | null,\r\n    isAuth: false,\r\n    captchaUrl: null as string | null\r\n}\r\n\r\ntype InitialStateType = typeof initialState;\r\n\r\ntype ActionType = setAuthUserDataActionType | getCaptchaUrlSuccessActionType\r\n\r\nconst authReducer = (state = initialState, action: ActionType): InitialStateType => {\r\n    switch (action.type) {\r\n        case SET_AUTH_USER_DATA: {\r\n            return { ...state, ...action.payload }\r\n        }\r\n        case GET_CAPTCHA_URL_SUCCESS: {\r\n            return { ...state, ...action.payload }\r\n        } \r\n        default: return state\r\n    }\r\n}\r\n\r\ntype setAuthUserDataActionType = {\r\n    type: typeof SET_AUTH_USER_DATA,\r\n    payload: {\r\n        userId: number | null,\r\n        email: string | null,\r\n        login: string | null,\r\n        isAuth: boolean\r\n    }\r\n}\r\n\r\nexport const setAuthUserData = (userId: number | null, email: string | null, login: string | null, isAuth: boolean): setAuthUserDataActionType => ({\r\n    type: SET_AUTH_USER_DATA,\r\n    payload: {\r\n        userId: userId, email: email, login: login, isAuth: isAuth\r\n    }\r\n});\r\n\r\ntype getCaptchaUrlSuccessActionType = {\r\n    type: typeof GET_CAPTCHA_URL_SUCCESS,\r\n    payload: {\r\n        captchaUrl: string\r\n    }\r\n}\r\n\r\nexport const getCaptchaUrlSuccess = (captchaUrl: string): getCaptchaUrlSuccessActionType => ({\r\n    type: GET_CAPTCHA_URL_SUCCESS,\r\n    payload: {\r\n        captchaUrl: captchaUrl\r\n    }\r\n});\r\n\r\nexport type ThunkType = ThunkAction<Promise<void>, AppStateType, unknown, ActionType>\r\n\r\nexport const getAuth = (): ThunkType => async (dispatch) => {\r\n    const meData = await authAPI.me()\r\n    if (meData.resultCode === ResultCodes.Succsess) {\r\n        const { id, email, login } = meData.data\r\n        dispatch(setAuthUserData(id, email, login, true));\r\n    }\r\n}\r\n\r\nexport const login = (email: string, password: string, rememberMe: boolean, captcha: null | string) => async (dispatch: any) => {\r\n    const loginData = await authAPI.login(email, password, rememberMe, captcha)\r\n    if (loginData.resultCode === ResultCodes.Succsess) {\r\n        dispatch(getAuth());\r\n    } else {\r\n        if (loginData.resultCode === ResultCodeForCaptcha.CaptchaIsRequired) {\r\n            dispatch(getCaptchaUrl());\r\n        }\r\n        const message = loginData.messages.length > 0 ? loginData.messages[0] : \"Some error\";\r\n        dispatch(stopSubmit(\"login\", { _error: message }));\r\n    }\r\n}\r\n\r\nexport const getCaptchaUrl = (): ThunkType => async (dispatch) => {\r\n    const data = await securityAPI.getCaptchaUrl()\r\n    dispatch(getCaptchaUrlSuccess(data.url));\r\n}\r\n\r\nexport const logout = (): ThunkType => async (dispatch) => {\r\n    const logoutData = await authAPI.logout()\r\n    if (logoutData.resultCode === ResultCodes.Succsess) {\r\n        dispatch(setAuthUserData(null, null, null, false));\r\n    }\r\n}\r\n\r\nexport default authReducer;\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"Friends_title__3_m6N\",\"img\":\"Friends_img__39f52\",\"friends\":\"Friends_friends__2_QgE\",\"friend\":\"Friends_friend__n9T_M\",\"text\":\"Friends_text__1ifn9\"};","export default __webpack_public_path__ + \"static/media/loader.9c48f460.gif\";","import React from 'react'\r\nimport loadingIcon from '../../../assets/img/loader.gif'\r\n\r\nconst Preloader: React.FC = () => {\r\n    return (\r\n      <div>\r\n        <img src={loadingIcon} alt=\"Loading\" style={{ marginLeft: \"200px\" }} />\r\n      </div>\r\n    );\r\n}\r\n\r\nexport default Preloader;\r\n","import { GetStateType } from './../types/types';\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { AppStateType } from './reduxStore';\r\nimport { profileAPI } from \"../api/api\";\r\nimport { FormAction, stopSubmit } from \"redux-form\";\r\nimport { PostType, PhotosType, ProfileType } from \"../types/types\";\r\nimport { Dispatch } from 'redux';\r\n\r\nconst ADD_POST = \"profile/ADD_POST\";\r\nconst DELETE_POST = \"profile/DELETE_POST\";\r\nconst SET_USER_PROFILE = \"profile/SET_USER_PROFILE\";\r\nconst SET_PROFILE_STATUS = \"profile/SET_PROFILE_STATUS\";\r\nconst SAVE_PHOTO_SUCCESS = \"profile/SAVE_PHOTO_SUCCESS\";\r\n\r\nconst initialState = {\r\n  postsData: [\r\n    { id: 1, message: \"Hi? how are you?\", likeCount: 0 },\r\n    { id: 2, message: \"It's my first post!\", likeCount: 23 },\r\n  ] as PostType[],\r\n  profile: null as ProfileType | null,\r\n  status: \"\"\r\n};\r\n\r\ntype InitialStateType = typeof initialState;\r\n\r\ntype ActionType = AddPostActionType | DeletPostActionType | SetUserProfileActionType | SetProfilStatusActionType | SavePhotoSuccessActionType\r\n\r\nconst profileReducer = (state = initialState, action: ActionType): InitialStateType => {\r\n  switch (action.type) {\r\n    case ADD_POST: {\r\n      return {\r\n        ...state,\r\n        postsData: [\r\n          ...state.postsData,\r\n          {\r\n            id: state.postsData[state.postsData.length - 1].id + 1,\r\n            message: action.newPostText,\r\n            likeCount: 0,\r\n          },\r\n        ],\r\n      };\r\n    }\r\n    case DELETE_POST: {\r\n      return { ...state, postsData: state.postsData.filter(post => post.id !== action.postId)}\r\n      }\r\n    case SET_USER_PROFILE: {\r\n      return { ...state, profile: action.profile }\r\n    }\r\n    case SET_PROFILE_STATUS: {\r\n      return { ...state, status: action.status }\r\n    }\r\n    case SAVE_PHOTO_SUCCESS: {\r\n      return { ...state, profile: { ...state.profile, photos: action.photos} as ProfileType }\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\ntype AddPostActionType = {\r\n  type: typeof ADD_POST,\r\n  newPostText: string\r\n}\r\n\r\nexport const addPost = (newPostText: string): AddPostActionType => ({ type: ADD_POST, newPostText: newPostText });\r\n\r\ntype DeletPostActionType = {\r\n  type: typeof DELETE_POST,\r\n  postId: number\r\n}\r\n\r\nexport const deletePost = (postId: number): DeletPostActionType => ({ type: DELETE_POST, postId: postId });\r\n\r\ntype SetUserProfileActionType = {\r\n  type: typeof SET_USER_PROFILE,\r\n  profile: ProfileType\r\n}\r\n\r\nexport const setUserProfile = (profile: ProfileType): SetUserProfileActionType => ({ type: SET_USER_PROFILE, profile });\r\n\r\ntype SetProfilStatusActionType = {\r\n  type: typeof SET_PROFILE_STATUS,\r\n  status: string\r\n}\r\n\r\nexport const setProfileStatus = (status: string): SetProfilStatusActionType => ({ type: SET_PROFILE_STATUS, status });\r\n\r\ntype SavePhotoSuccessActionType = {\r\n  type: typeof SAVE_PHOTO_SUCCESS,\r\n  photos: PhotosType\r\n}\r\n\r\nexport const savePhotoSuccess = (photos: PhotosType): SavePhotoSuccessActionType => ({ type: SAVE_PHOTO_SUCCESS, photos });\r\n\r\ntype ThunkType = ThunkAction<Promise<void>, AppStateType, unknown, ActionType>\r\n\r\nexport const getProfileInfo = (userId: number | null): ThunkType => async (dispatch) => {\r\n  const data = await profileAPI.getProfileInfo(userId)\r\n  dispatch(setUserProfile(data));\r\n}\r\n\r\nexport const getProfileStatus = (userId: number): ThunkType => async (dispatch) => {\r\n  const data = await profileAPI.getStatus(userId)\r\n  dispatch(setProfileStatus(data));\r\n}\r\n\r\nexport const updateProfileStatus = (status: string): ThunkType => async (dispatch) => {\r\n  const data = await profileAPI.updateStatus(status)\r\n  if (data.resultCode === 0) {\r\n    dispatch(setProfileStatus(status));\r\n  }\r\n}\r\n\r\nexport const savePhoto = (file: any): ThunkType => async (dispatch) => {\r\n  const data: any = await profileAPI.savePhoto(file);\r\n  if (data.resultCode === 0) {\r\n    dispatch(savePhotoSuccess(data.data.photos));\r\n  }\r\n}\r\n\r\nexport const saveProfile = (profile: ProfileType) => async (dispatch: any, getState: GetStateType) => {\r\n  const userId = getState().auth.id;\r\n  const data = await profileAPI.saveProfile(profile);\r\n  if (data.resultCode === 0) {\r\n    dispatch(getProfileInfo(userId));\r\n  } else {\r\n    dispatch(stopSubmit(\"edit-profile\", { _error: data.messages[0] }));\r\n    return Promise.reject(data.messages[0]);\r\n  }\r\n}\r\n\r\nexport default profileReducer;","import { ProfileType, UserType, PhotosType } from './../types/types';\r\nimport axios, { AxiosResponse } from \"axios\";\r\n\r\nexport enum ResultCodes {\r\n    Succsess = 0,\r\n    Error = 1,\r\n}\r\n\r\nexport enum ResultCodeForCaptcha {\r\n    CaptchaIsRequired = 10\r\n}\r\n\r\nconst instance = axios.create({\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n    withCredentials: true,\r\n    headers: {\r\n        \"API-KEY\": \"f406f314-0e27-4ae0-9815-6188b0f3b0b0\"\r\n    }\r\n})\r\n\r\ntype GetUsersResponseType = {\r\n    items: UserType[],\r\n    totalCount: number,\r\n    error: string\r\n}\r\n\r\ntype FollowResponseType = {\r\n    resultCode: ResultCodes,\r\n    messages: string[],\r\n    data: {}\r\n}\r\n\r\ntype FollowRequestType = {\r\n    userId: number\r\n}\r\n\r\nexport const userAPI = {\r\n    getUsers(currentPage = 1, pageSize = 10) {\r\n        return instance.get<GetUsersResponseType>(`users?page=${currentPage}&count=${pageSize}`)\r\n            .then(response => response.data);\r\n    },\r\n    follow(id: number) {\r\n        return instance.post<FollowRequestType, AxiosResponse<FollowResponseType>>(`follow/${id}`)\r\n            .then(response => response.data);\r\n    },\r\n    unfollow(id: number) {\r\n        return instance.delete<FollowRequestType, AxiosResponse<FollowResponseType>>(`follow/${id}`)\r\n            .then(response => response.data);\r\n    },\r\n}\r\n\r\ntype GetProfileInfoResponseType = {\r\n    userId: number\r\n    lookingForAJob: boolean,\r\n    lookingForAJobDescription: string,\r\n    fullName: string,\r\n    contacts: {\r\n        github: string,\r\n        vk: string,\r\n        facebook: string,\r\n        instagram: string,\r\n        twitter: string,\r\n        website: string,\r\n        youtube: string,\r\n        mainLink: string\r\n    },\r\n    photos: {\r\n        small: string,\r\n        large: string\r\n    }\r\n}\r\n\r\ntype GetStatusResponseType = string\r\n\r\ntype UpdateStatusResponseType = {\r\n    resultCode: ResultCodes,\r\n    messages: string[],\r\n    data: {}\r\n}\r\n\r\ntype UpdateStatusRequestType = {\r\n    status: string\r\n}\r\n\r\ntype SaveProfileResponseType = {\r\n    resultCode: ResultCodes,\r\n    messages: string[],\r\n    data: {}\r\n}\r\n\r\ntype SaveProfileRequestType = ProfileType\r\n\r\nexport const profileAPI = {\r\n    getProfileInfo(userId: number | null) {\r\n        return instance.get<GetProfileInfoResponseType>(`profile/${userId}`)\r\n            .then(response => response.data);\r\n    },\r\n    getStatus(userId: number) {\r\n        return instance.get<GetStatusResponseType>(`profile/status/${userId}`)\r\n        .then(response => response.data);\r\n    },\r\n    updateStatus(status: string) {\r\n        return instance.put <UpdateStatusRequestType, AxiosResponse<UpdateStatusResponseType>>(`profile/status`, { status: status })\r\n        .then(response => response.data);\r\n    },\r\n    savePhoto(photoFile: any) {\r\n        const formData = new FormData();\r\n        formData.append('image', photoFile);\r\n        return instance.put(`profile/photo`, formData, {\r\n            headers: {\r\n            'Content-Type': 'multipart/form-data'\r\n            }\r\n        })\r\n            .then(response => response.data);\r\n    },\r\n    saveProfile(profile: ProfileType) {\r\n        return instance.put<SaveProfileRequestType, AxiosResponse<SaveProfileResponseType>>(`profile`, profile)\r\n            .then(response => response.data);\r\n    }\r\n}\r\n\r\ntype MeResponseType = {\r\n    data: {\r\n        id: number,\r\n        email: string,\r\n        login: string\r\n    },\r\n    resultCode: ResultCodes,\r\n    messages: string[]\r\n}\r\n\r\ntype LoginResponseType = {\r\n    data: {\r\n        userId: number,\r\n    },\r\n    resultCode: ResultCodes | ResultCodeForCaptcha,\r\n    messages: string[]\r\n}\r\n\r\ntype LoginRequestType = {\r\n    email: string,\r\n    password: string,\r\n    rememberMe: boolean,\r\n    captcha: null | string\r\n}\r\n\r\nexport const authAPI = {\r\n    me() {\r\n        return instance.get<MeResponseType>(`auth/me`)\r\n            .then(response => response.data);\r\n    },\r\n    login(email: string, password: string, rememberMe=false, captcha: null | string = null) {\r\n        return instance.post <LoginRequestType, AxiosResponse<LoginResponseType>>(`auth/login`, { email: email, password: password, rememberMe: rememberMe, captcha: captcha })\r\n            .then(response => response.data);\r\n    },\r\n    logout() {\r\n        return instance.delete<LoginResponseType>(`auth/login`)\r\n            .then(response => response.data);\r\n    }\r\n}\r\n\r\ntype GetCaptchaUrlResponseType = {\r\n    url: string\r\n}\r\n\r\nexport const securityAPI = {\r\n    getCaptchaUrl() {\r\n        return instance.get<GetCaptchaUrlResponseType>(`security/get-captcha-url`)\r\n            .then(response => response.data);\r\n    }\r\n}\r\n","import { MessageType, DialogType } from \"../types/types\";\r\n\r\nconst SEND_MESSAGE = \"messages/SEND-MESSAGE\";\r\n\r\nconst initialState = {\r\n  messagesData: [\r\n    { id: 1, message: \"Hi\" },\r\n    { id: 2, message: \"How are you?\" },\r\n    { id: 3, message: \"Yo\" },\r\n  ] as MessageType[],\r\n  dialogsData: [\r\n    {\r\n      id: 1,\r\n      userName: \"Dimych\",\r\n      photo:\r\n        \"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg\",\r\n    },\r\n    {\r\n      id: 2,\r\n      userName: \"Max\",\r\n      photo:\r\n        \"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg\",\r\n    },\r\n    {\r\n      id: 3,\r\n      userName: \"Anna\",\r\n      photo:\r\n        \"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg\",\r\n    },\r\n    {\r\n      id: 4,\r\n      userName: \"Sveta\",\r\n      photo:\r\n        \"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg\",\r\n    },\r\n    {\r\n      id: 5,\r\n      userName: \"Sasha\",\r\n      photo:\r\n        \"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg\",\r\n    },\r\n    {\r\n      id: 6,\r\n      userName: \"Victor\",\r\n      photo:\r\n        \"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg\",\r\n    },\r\n  ] as DialogType[],\r\n};\r\n\r\ntype InitialStateType = typeof initialState;\r\n\r\nconst messagesReducer = (state = initialState, action: sendMessageActionType): InitialStateType => {\r\n  switch (action.type) {\r\n    case SEND_MESSAGE: {\r\n      return {\r\n        ...state,\r\n        messagesData: [\r\n          ...state.messagesData,\r\n          {\r\n            id: state.messagesData[state.messagesData.length - 1].id + 1,\r\n            message: action.newMessage,\r\n          },\r\n        ],\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default messagesReducer;\r\n\r\ntype sendMessageActionType = {\r\n  type: typeof SEND_MESSAGE,\r\n  newMessage: string\r\n}\r\n\r\nexport const sendMessage = (newMessage: string): sendMessageActionType => ({ type: SEND_MESSAGE, newMessage: newMessage});\r\n\r\n","export const updateObjectInArray = (items, check, objPropName, newObjProps) => {\r\n    return items.map((item) => {\r\n        if (item[objPropName] === check) {\r\n            return { ...item, ...newObjProps };\r\n        }\r\n        return item;\r\n    })\r\n}\r\n","import { ResultCodes } from './../api/api';\r\nimport { AppStateType } from './reduxStore';\r\nimport { UserType } from '../types/types';\r\nimport { userAPI } from '../api/api'\r\nimport { updateObjectInArray } from \"../utils/object-helpers\";\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { Dispatch } from 'redux';\r\n\r\nconst FOLLOW_SUCCESS = \"findUsers/FOLLOW_SUCCESS\";\r\nconst UNFOLLOW_SUCCESS = \"findUsers/UNFOLLOW_SUCCESS\";\r\nconst SET_USERS = \"findUsers/SET_USERS\";\r\nconst SET_CURRENT_PAGE = \"findUsers/SET_CURRENT_PAGE\";\r\nconst SET_TOTAL_USERS_COUNT = \"findUsers/SET_TOTAL_USERS_COUNT\";\r\nconst SET_IS_FETCHING = \"findUsers/SET_IS_FETCHING\";\r\nconst SET_FOLLOWING_PROGRESS = \"findUsers/SET_FOLLOWING_PROGRESS\";\r\n\r\nconst initialState = {\r\n  users: [] as UserType[],\r\n  pageSize: 10,\r\n  totalUsersCount: 0,\r\n  currentPage: 1,\r\n  isFetching: false,\r\n  followingInProgress: [] as number[]\r\n};\r\n\r\ntype InitialStateType = typeof initialState;\r\n\r\ntype ActionType = FollowSuccessActionType | UnfollowSuccessActionType\r\n  | SetUsersActionType | SetCurrentPageActionType | SetTotalUsersCountActionType\r\n  | SetIsFetchingActionType | SetFollowingProgressActionType\r\n\r\nconst findUsersReducer = (state = initialState, action: ActionType): InitialStateType => {\r\n  switch (action.type) {\r\n    case FOLLOW_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        users: updateObjectInArray(state.users, action.userId, \"id\", {followed: true})\r\n      };\r\n    }\r\n    case UNFOLLOW_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        users: updateObjectInArray(state.users, action.userId, \"id\", {followed: false})\r\n      };\r\n    }\r\n    case SET_USERS: {\r\n      return { ...state, users: action.users };\r\n    }\r\n    case SET_CURRENT_PAGE: {\r\n      return { ...state, currentPage: action.pageNumber };\r\n    }\r\n    case SET_TOTAL_USERS_COUNT: {\r\n      return { ...state, totalUsersCount: action.count };\r\n    }\r\n    case SET_IS_FETCHING: {\r\n      return { ...state, isFetching: action.isFetching };\r\n    }\r\n    case SET_FOLLOWING_PROGRESS: {\r\n      return {\r\n        ...state,\r\n        followingInProgress: action.isFollowing\r\n          ? [...state.followingInProgress, action.userId]\r\n          : state.followingInProgress.filter(id => id !== action.userId)\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\ntype FollowSuccessActionType = {\r\n  type: typeof FOLLOW_SUCCESS,\r\n  userId: number\r\n}\r\n\r\nexport const followSuccess = (userId: number): FollowSuccessActionType => ({ type: FOLLOW_SUCCESS, userId });\r\n\r\ntype UnfollowSuccessActionType = {\r\n  type: typeof UNFOLLOW_SUCCESS,\r\n  userId: number\r\n}\r\nexport const unfollowSuccess = (userId: number): UnfollowSuccessActionType => ({ type: UNFOLLOW_SUCCESS, userId });\r\n\r\ntype SetUsersActionType = {\r\n  type: typeof SET_USERS,\r\n  users: UserType[]\r\n}\r\n\r\nexport const setUsers = (users: UserType[]): SetUsersActionType => ({ type: SET_USERS, users });\r\n\r\ntype SetCurrentPageActionType = {\r\n  type: typeof SET_CURRENT_PAGE,\r\n  pageNumber: number\r\n}\r\n\r\nexport const setCurrentPage = (pageNumber: number): SetCurrentPageActionType => ({\r\n  type: SET_CURRENT_PAGE,\r\n  pageNumber,\r\n});\r\n\r\ntype SetTotalUsersCountActionType = {\r\n  type: typeof SET_TOTAL_USERS_COUNT,\r\n  count: number\r\n}\r\n\r\nexport const setTotalUsersCount = (totalUsersCount:number): SetTotalUsersCountActionType => ({\r\n  type: SET_TOTAL_USERS_COUNT,\r\n  count: totalUsersCount,\r\n});\r\n\r\ntype SetIsFetchingActionType = {\r\n  type: typeof SET_IS_FETCHING,\r\n  isFetching: boolean\r\n}\r\n\r\nexport const setIsFetching = (isFetching: boolean): SetIsFetchingActionType => ({\r\n  type: SET_IS_FETCHING,\r\n  isFetching: isFetching,\r\n});\r\n\r\ntype SetFollowingProgressActionType = {\r\n  type: typeof SET_FOLLOWING_PROGRESS,\r\n  isFollowing: boolean,\r\n  userId: number\r\n}\r\n\r\nexport const setFollowingProgress = (isFollowing: boolean, userId: number): SetFollowingProgressActionType => ({\r\n  type: SET_FOLLOWING_PROGRESS,\r\n  isFollowing: isFollowing,\r\n  userId: userId\r\n});\r\n\r\ntype ThunkType = ThunkAction<Promise<void>, AppStateType, unknown, ActionType>\r\n\r\nexport const requestUsers = (page: number, pageSize: number): ThunkType => async (dispatch) => {\r\n  dispatch(setIsFetching(true));\r\n  dispatch(setCurrentPage(page));\r\n  const data = await userAPI.getUsers(page, pageSize);\r\n    dispatch(setIsFetching(false));\r\n    dispatch(setUsers(data.items));\r\n    dispatch(setTotalUsersCount(data.totalCount));\r\n}\r\n\r\nconst _followUnfollowFlow = async (dispatch: Dispatch<ActionType>, apiMethod: any, userId: number, actionCreator: (userId: number) => FollowSuccessActionType | UnfollowSuccessActionType)  => {\r\n  dispatch(setFollowingProgress(true, userId));\r\n  const data = await apiMethod(userId);\r\n  if (data.resultCode === ResultCodes.Succsess) {\r\n    dispatch(actionCreator(userId));\r\n  }\r\n  dispatch(setFollowingProgress(false, userId));\r\n}\r\n\r\nexport const follow = (userId: number): ThunkType => async (dispatch) => {\r\n  await _followUnfollowFlow(dispatch, userAPI.follow.bind(userAPI), userId, followSuccess);\r\n}\r\n\r\nexport const unfollow = (userId: number): ThunkType  => async (dispatch) => {\r\n  await _followUnfollowFlow(dispatch, userAPI.unfollow.bind(userAPI), userId, unfollowSuccess);\r\n}\r\n\r\nexport default findUsersReducer;\r\n"],"sourceRoot":""}