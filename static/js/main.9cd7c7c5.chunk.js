(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{14:function(e,t,s){e.exports={user:"FindUsers_user__2rFKQ",container:"FindUsers_container__qEu8S",info:"FindUsers_info__3_NER",photo:"FindUsers_photo__1Bosl",btn:"FindUsers_btn__nze1L",buttons:"FindUsers_buttons__1z6w9",smallbtn:"FindUsers_smallbtn__d29Bx",smallbtnActive:"FindUsers_smallbtnActive__3Q8en"}},15:function(e,t,s){e.exports={dialogs:"Dialogs_dialogs__37K0U",dialogsItems:"Dialogs_dialogsItems__2XYIc",add:"Dialogs_add__Gvkj9",textArea:"Dialogs_textArea__pcLzF",btn:"Dialogs_btn__34GFz"}},21:function(e,t,s){e.exports={title:"Friends_title__3_m6N",img:"Friends_img__39f52",friends:"Friends_friends__2_QgE",friend:"Friends_friend__n9T_M",text:"Friends_text__1ifn9"}},22:function(e,t,s){e.exports={myposts:"MyPosts_myposts__2869F",title:"MyPosts_title__1V49T",textArea:"MyPosts_textArea__2qX7E",btn:"MyPosts_btn__1CtxC"}},23:function(e,t,s){e.exports={header:"Header_header__Jm1RZ",logo:"Header_logo__3vvBu",loginBlock:"Header_loginBlock__29PXN",login:"Header_login__1HUgF"}},25:function(e,t,s){e.exports={post:"Post_post__1xeZn",item:"Post_item__1qbBJ",photo:"Post_photo__1kzoD",btn:"Post_btn__2wcP5"}},26:function(e,t,s){e.exports={dialog:"Dialog_dialog__24Zhq",active:"Dialog_active__XkXzf",user:"Dialog_user__35ZuG",img:"Dialog_img__37Hiv"}},46:function(e,t,s){e.exports={message:"Message_message__2Wplz"}},51:function(e,t,s){},52:function(e,t,s){},6:function(e,t,s){e.exports={nav:"Navbar_nav__iAsk2",item:"Navbar_item__26SM4",active:"Navbar_active__2enci",icon:"Navbar_icon__Qc7ak"}},63:function(e,t,s){},82:function(e,t,s){},83:function(e,t,s){},84:function(e,t,s){},85:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s.n(a),i=s(29),c=s.n(i),o=(s(51),function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,86)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,i=t.getLCP,c=t.getTTFB;s(e),a(e),n(e),i(e),c(e)}))}),r=s(36),l=s(31),u=s(2),p="ADD_POST",d="UPDATE_NEW_POST_TEXT",j="SET_USER_PROFILE",h={postsData:[{id:1,message:"Hi? how are you?",likeCount:0},{id:2,message:"It's my first post!",likeCount:23}],newPostText:"",profile:null},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(u.a)(Object(u.a)({},e),{},{postsData:[].concat(Object(l.a)(e.postsData),[{id:e.postsData[e.postsData.length-1].id+1,message:e.newPostText,likeCount:0}]),newPostText:""});case d:return Object(u.a)(Object(u.a)({},e),{},{newPostText:t.newText});case j:return Object(u.a)(Object(u.a)({},e),{},{profile:t.profile});default:return e}},f="SEND-MESSAGE",m="UPDATE-NEW-MESSAGE",g={messagesData:[{id:1,message:"Hi"},{id:2,message:"How are you?"},{id:3,message:"Yo"}],newMessageText:"",dialogsData:[{id:1,userName:"Dimych",photo:"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg"},{id:2,userName:"Max",photo:"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg"},{id:3,userName:"Anna",photo:"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg"},{id:4,userName:"Sveta",photo:"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg"},{id:5,userName:"Sasha",photo:"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg"},{id:6,userName:"Victor",photo:"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg"}]},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(u.a)(Object(u.a)({},e),{},{messagesData:[].concat(Object(l.a)(e.messagesData),[{id:e.messagesData[e.messagesData.length-1].id+1,message:e.newMessageText}]),newMessageText:""});case m:return Object(u.a)(Object(u.a)({},e),{},{newMessageText:t.newMessage});default:return e}},_={friends:[{id:1,name:"Dimych",photo:"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg"},{id:2,name:"Max",photo:"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg"},{id:3,name:"Sveta",photo:"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg"}]},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_;return e},v="FOLLOW",N="UNFOLLOW",k="SET_USERS",w="SET_CURRENT_PAGE",P="SET_TOTAL_USERS_COUNT",C="SET_IS_FETCHING",S={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!1},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(u.a)(Object(u.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(u.a)(Object(u.a)({},e),{},{followed:!0}):e}))});case N:return Object(u.a)(Object(u.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(u.a)(Object(u.a)({},e),{},{followed:!1}):e}))});case k:return Object(u.a)(Object(u.a)({},e),{},{users:t.users});case w:return Object(u.a)(Object(u.a)({},e),{},{currentPage:t.pageNumber});case P:return Object(u.a)(Object(u.a)({},e),{},{totalUsersCount:t.count});case C:return Object(u.a)(Object(u.a)({},e),{},{isFetching:t.isFetching});default:return e}},T="SET_AUTH_USER_DATA",D={id:null,email:null,login:null,isAuth:!1},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(u.a)(Object(u.a)(Object(u.a)({},e),t.data),{},{isAuth:!0});default:return e}},F=Object(r.a)({profile:b,messages:O,navbar:x,findUsers:U,auth:y}),M=Object(r.b)(F),E=s(5),I=s(4),A=(s(52),s(7)),L=s(21),q=s.n(L),z=s(0);var R=Object(A.b)((function(e){return{friends:e.navbar.friends}}))((function(e){return Object(z.jsxs)("div",{children:[Object(z.jsx)("h3",{className:q.a.title,children:"FRIENDS"}),e.friends.map((function(e){return Object(z.jsx)("div",{className:q.a.friends,children:Object(z.jsxs)("div",{className:q.a.friend,children:[Object(z.jsx)("img",{className:q.a.img,src:e.photo,alt:"Avatar example"}),Object(z.jsx)("p",{className:q.a.text,children:e.name})]})},e.id)}))]})})),G=s(6),H=s.n(G),W=s.p+"static/media/search_white.66ea5ec3.svg";function B(e){return Object(z.jsxs)("nav",{className:H.a.nav,children:[Object(z.jsx)(E.b,{to:"/profile",activeClassName:H.a.active,className:H.a.item,children:"PROFILE"}),Object(z.jsx)(E.b,{to:"/dialogs",activeClassName:H.a.active,className:H.a.item,children:"MESSAGES"}),Object(z.jsx)(E.b,{to:"/news",activeClassName:H.a.active,className:H.a.item,children:"NEWS"}),Object(z.jsx)(E.b,{to:"/music",activeClassName:H.a.active,className:H.a.item,children:"MUSIC"}),Object(z.jsx)(E.b,{to:"/users",activeClassName:H.a.active,className:H.a.item,children:Object(z.jsxs)("div",{className:H.a.icon,children:[Object(z.jsx)("img",{src:W,alt:"serach icon"}),"USERS"]})}),Object(z.jsx)("br",{}),Object(z.jsx)(E.b,{to:"/settings",activeClassName:H.a.active,className:H.a.item,children:"SETTINGS"}),Object(z.jsx)(R,{})]})}var X=s(17),Y=s(18),Q=s(20),J=s(19),K=(s(63),s(22)),V=s.n(K),Z=s(25),$=s.n(Z);function ee(e){return Object(z.jsxs)("div",{className:$.a.post,children:[Object(z.jsxs)("div",{className:$.a.item,children:[Object(z.jsx)("img",{className:$.a.photo,src:"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg",alt:"Avatar example"}),Object(z.jsx)("p",{children:e.message})]}),Object(z.jsxs)("button",{className:$.a.btn,children:["Like ",e.likeCount]})]})}var te=Object(A.b)((function(e){return{postsData:e.profile.postsData,newPostText:e.profile.newPostText}}),{addPost:function(){return{type:p}},updateNewPostText:function(e){return{type:d,newText:e}}})((function(e){var t=n.a.createRef();return Object(z.jsxs)("div",{children:[Object(z.jsxs)("div",{className:V.a.myposts,children:[Object(z.jsx)("h2",{className:V.a.title,children:"MY POSTS"}),Object(z.jsx)("textarea",{onChange:function(){var s=t.current.value;e.updateNewPostText(s)},ref:t,className:V.a.textArea,placeholder:"Start your story...",value:e.newPostText}),Object(z.jsx)("button",{onClick:function(){e.addPost()},className:V.a.btn,children:"Add post"})]}),Object(z.jsx)("div",{className:V.a.posts,children:e.postsData.map((function(e){return Object(z.jsx)(ee,{message:e.message,likeCount:e.likeCount},e.id)}))})]})})),se=s(9),ae=s.n(se),ne=s.p+"static/media/loader.9c48f460.gif";function ie(e){return Object(z.jsx)("div",{children:Object(z.jsx)("img",{src:ne,alt:"Loading",style:{marginLeft:"200px"}})})}function ce(e){return e.profile?Object(z.jsxs)("div",{className:ae.a.info,children:[Object(z.jsxs)("div",{className:ae.a.description,children:[Object(z.jsx)("img",{className:ae.a.avatar,src:e.profile.photos.small?e.profile.photos.small:"https://st2.depositphotos.com/3873339/8013/i/600/depositphotos_80131050-stock-photo-realistic-square-picture-frame-on.jpg",alt:"Avatar"}),Object(z.jsx)("h1",{className:ae.a.title,children:e.profile.fullName}),Object(z.jsx)("p",{className:ae.a.text,children:e.profile.aboutMe})]}),Object(z.jsxs)("ul",{children:[Object(z.jsx)("h3",{children:"Contacts:"}),e.profile.contacts.facebook&&Object(z.jsx)("li",{children:Object(z.jsx)("a",{className:ae.a.link,href:e.profile.contacts.facebook,children:"Facebook"})}),e.profile.contacts.website&&Object(z.jsx)("li",{children:Object(z.jsx)("a",{className:ae.a.link,href:e.profile.contacts.website,children:"Website"})}),e.profile.contacts.vk&&Object(z.jsx)("li",{children:Object(z.jsx)("a",{className:ae.a.link,href:e.profile.contacts.vk,children:"VK"})}),e.profile.contacts.twitter&&Object(z.jsx)("li",{children:Object(z.jsx)("a",{className:ae.a.link,href:e.profile.contacts.twitter,children:"Twitter"})}),e.profile.contacts.instagram&&Object(z.jsx)("li",{children:Object(z.jsx)("a",{className:ae.a.link,href:e.profile.contacts.instagram,children:"Instagram"})}),e.profile.contacts.youtube&&Object(z.jsx)("li",{children:Object(z.jsx)("a",{className:ae.a.link,href:e.profile.contacts.youtube,children:"Youtube"})}),e.profile.contacts.github&&Object(z.jsx)("li",{children:Object(z.jsx)("a",{className:ae.a.link,href:e.profile.contacts.github,children:"Github"})}),e.profile.contacts.mainLink&&Object(z.jsx)("li",{children:Object(z.jsx)("a",{className:ae.a.link,href:e.profile.contacts.mainLink,children:"Main Link"})})]})]}):Object(z.jsx)(ie,{})}function oe(e){return Object(z.jsxs)("div",{children:[Object(z.jsx)(ce,{profile:e.profile}),Object(z.jsx)(te,{})]})}var re=s(30),le=s.n(re),ue=function(e){Object(Q.a)(s,e);var t=Object(J.a)(s);function s(){return Object(X.a)(this,s),t.apply(this,arguments)}return Object(Y.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.userId;t=void 0===t?"2":this.props.match.params.userId,le.a.get("https://social-network.samuraijs.com/api/1.0/profile/".concat(t)).then((function(t){e.props.setUserProfile(t.data)}))}},{key:"render",value:function(){return Object(z.jsx)("div",{children:Object(z.jsx)(oe,Object(u.a)(Object(u.a)({},this.props),{},{profile:this.props.profile}))})}}]),s}(a.Component),pe=Object(I.e)(ue),de=Object(A.b)((function(e){return{profile:e.profile.profile}}),{setUserProfile:function(e){return{type:j,profile:e}}})(pe);s(82);function je(){return Object(z.jsx)("div",{children:"News"})}s(83);function he(){return Object(z.jsx)("div",{children:"Music"})}s(84);function be(){return Object(z.jsx)("div",{children:"Settings"})}var fe=s(26),me=s.n(fe);function ge(e){return Object(z.jsx)(E.b,{to:"/dialogs/".concat(e.id),activeClassName:me.a.active,className:me.a.dialog,children:Object(z.jsxs)("div",{className:me.a.user,children:[Object(z.jsx)("img",{className:me.a.img,src:e.photo,alt:"Avatar example"}),e.userName]})})}var Oe=s(15),_e=s.n(Oe),xe=s(46),ve=s.n(xe);function Ne(e){return Object(z.jsx)("div",{className:ve.a.message,children:e.message})}var ke=Object(A.b)((function(e){return{dialogsData:e.messages.dialogsData,messagesData:e.messages.messagesData,newMessageText:e.messages.newMessageText}}),{sendMessage:function(){return{type:f}},updateNewMessage:function(e){return{type:m,newMessage:e}}})((function(e){var t=n.a.createRef();return Object(z.jsxs)("div",{className:_e.a.dialogs,children:[Object(z.jsx)("div",{className:_e.a.dialogsItems,children:e.dialogsData.map((function(e){return Object(z.jsx)(ge,{id:e.id,userName:e.userName,photo:e.photo},e.id)}))}),Object(z.jsxs)("div",{className:_e.a.messages,children:[e.messagesData.map((function(e){return Object(z.jsx)(Ne,{message:e.message},e.id)})),Object(z.jsxs)("div",{className:_e.a.add,children:[Object(z.jsx)("textarea",{value:e.newMessageText,onChange:function(){var s=t.current.value;e.updateNewMessage(s)},ref:t,className:_e.a.textArea,placeholder:"Your message..."}),Object(z.jsx)("button",{onClick:function(){e.sendMessage()},className:_e.a.btn,children:"Send message"})]})]})]})})),we=s(14),Pe=s.n(we),Ce=s.p+"static/media/user.181d3cde.jpg",Se=le.a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"f406f314-0e27-4ae0-9815-6188b0f3b0b0"}}),Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return Se.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},Te=function(e){return Se.post("follow/".concat(e)).then((function(e){return e.data}))},De=function(e){return Se.delete("follow/".concat(e)).then((function(e){return e.data}))},ye=function(){return Se.get("auth/me").then((function(e){return e.data}))};function Fe(e){Math.ceil(e.totalUsersCount/e.pageSize);for(var t=[],s=1;s<=10;s++)t.push(s);return Object(z.jsxs)("div",{children:[Object(z.jsx)("div",{className:Pe.a.buttons,children:t.map((function(t){return Object(z.jsx)("button",{onClick:function(){return e.onPageChanged(t)},className:e.currentPage===t?Pe.a.smallbtnActive:Pe.a.smallbtn,children:t},t)}))}),e.users.map((function(t){return Object(z.jsxs)("div",{className:Pe.a.user,children:[Object(z.jsxs)("div",{className:Pe.a.container,children:[Object(z.jsx)(E.b,{to:"./profile/".concat(t.id),children:Object(z.jsx)("img",{className:Pe.a.photo,src:null!==t.photos.small?t.photos.small:Ce,alt:t.name})}),t.followed?Object(z.jsx)("button",{onClick:function(){De(t.id).then((function(s){0===s.resultCode&&e.unfollow(t.id)}))},className:Pe.a.btn,children:"UNFOLLOW"}):Object(z.jsx)("button",{onClick:function(){Te(t.id).then((function(s){0===s.resultCode&&e.follow(t.id)}))},className:Pe.a.btn,children:"FOLLOW"})]}),Object(z.jsxs)("div",{className:Pe.a.info,children:[Object(z.jsx)("h3",{children:t.name}),Object(z.jsx)("p",{children:t.status})]})]},t.id)}))]})}var Me=function(e){Object(Q.a)(s,e);var t=Object(J.a)(s);function s(e){var a;return Object(X.a)(this,s),(a=t.call(this,e)).onPageChanged=function(e){a.props.setIsFetching(!0),a.props.setCurrentPage(e),Ue(e,a.props.pageSize).then((function(e){a.props.setIsFetching(!1),a.props.setUsers(e.items)}))},a}return Object(Y.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.props.setIsFetching(!0),Ue(this.props.currentPage,this.props.pageSize).then((function(t){e.props.setIsFetching(!1),e.props.setUsers(t.items),e.props.setTotalUsersCount(t.totalCount)}))}},{key:"render",value:function(){return Object(z.jsx)(z.Fragment,{children:this.props.isFetching?Object(z.jsx)(ie,{}):Object(z.jsx)(Fe,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,onPageChanged:this.onPageChanged,currentPage:this.props.currentPage,unfollow:this.props.unfollow,follow:this.props.follow,users:this.props.users})})}}]),s}(a.Component),Ee=Object(A.b)((function(e){return{users:e.findUsers.users,pageSize:e.findUsers.pageSize,totalUsersCount:e.findUsers.totalUsersCount,currentPage:e.findUsers.currentPage,isFetching:e.findUsers.isFetching}}),{follow:function(e){return{type:v,userId:e}},unfollow:function(e){return{type:N,userId:e}},setUsers:function(e){return{type:k,users:e}},setCurrentPage:function(e){return{type:w,pageNumber:e}},setTotalUsersCount:function(e){return{type:P,count:e}},setIsFetching:function(e){return{type:C,isFetching:e}}})(Me),Ie=s.p+"static/media/logo.6ce24c58.svg",Ae=s(23),Le=s.n(Ae);function qe(e){return Object(z.jsxs)("header",{className:Le.a.header,children:[Object(z.jsx)("img",{className:Le.a.logo,src:Ie,alt:"logo"}),Object(z.jsx)("div",{className:Le.a.loginBlock,children:e.isAuth?Object(z.jsx)("p",{className:Le.a.login,children:e.login}):Object(z.jsx)(E.b,{className:Le.a.login,to:"./login",children:"Login"})})]})}var ze=function(e){Object(Q.a)(s,e);var t=Object(J.a)(s);function s(e){return Object(X.a)(this,s),t.call(this,e)}return Object(Y.a)(s,[{key:"componentDidMount",value:function(){var e=this;ye().then((function(t){if(0===t.resultCode){var s=t.data,a=s.id,n=s.email,i=s.login;e.props.setAuthUserData(a,n,i)}}))}},{key:"render",value:function(){return Object(z.jsx)(qe,Object(u.a)({},this.props))}}]),s}(a.Component),Re=Object(A.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{setAuthUserData:function(e,t,s){return{type:T,data:{userId:e,email:t,login:s}}}})(ze),Ge=function(e){return Object(z.jsx)(E.a,{children:Object(z.jsxs)("div",{className:"app-wrapper",children:[Object(z.jsx)(Re,{}),Object(z.jsx)(B,{}),Object(z.jsxs)("div",{className:"app-wrapper-content",children:[Object(z.jsx)(I.a,{path:"/profile/:userId?",render:function(){return Object(z.jsx)(de,{})}}),Object(z.jsx)(I.a,{path:"/dialogs",render:function(){return Object(z.jsx)(ke,{})}}),Object(z.jsx)(I.a,{path:"/news",render:function(){return Object(z.jsx)(je,{})}}),Object(z.jsx)(I.a,{path:"/music",render:function(){return Object(z.jsx)(he,{})}}),Object(z.jsx)(I.a,{path:"/users",render:function(){return Object(z.jsx)(Ee,{})}}),Object(z.jsx)(I.a,{path:"/settings",render:function(){return Object(z.jsx)(be,{})}})]})]})})};c.a.render(Object(z.jsx)(n.a.StrictMode,{children:Object(z.jsx)(A.a,{store:M,children:Object(z.jsx)(Ge,{})})}),document.getElementById("root")),o()},9:function(e,t,s){e.exports={info:"ProfileInfo_info__1iMuy",description:"ProfileInfo_description__2Vn_M",avatar:"ProfileInfo_avatar__v0QMI",title:"ProfileInfo_title__cSU_W",text:"ProfileInfo_text__riMmS",link:"ProfileInfo_link__36UG7"}}},[[85,1,2]]]);
//# sourceMappingURL=main.9cd7c7c5.chunk.js.map